(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33331d6a"],{"05fc":function(t,e,n){},"4e0c":function(t,e,n){t.exports=n.p+"img/default_user.c33f30fc.png"},6877:function(t,e,n){"use strict";var s=n("05fc"),o=n.n(s);o.a},"74e2":function(t,e,n){},"81e0":function(t,e,n){"use strict";var s=n("74e2"),o=n.n(s);o.a},bb51:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"l-container__inner"},[n("h1",{staticClass:"title__level1"},[t._v("Chit Chat")]),n("main",[n("ChatBoard")],1)]),n("Form")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.posts,(function(e,s){return n("article",{key:s,staticClass:"l-list"},[t._m(0,!0),n("div",{staticClass:"content__main"},[n("p",{staticClass:"user__name"},[t._v(t._s(e.fields.name.stringValue))]),n("div",{staticClass:"content__inner balloon"},[n("p",{staticClass:"content__comment"},[t._v(t._s(e.fields.comment.stringValue))]),n("time",{staticClass:"content__time"},[t._v(t._s(new Date(e.createTime).toLocaleDateString()))])])])])})),0)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content__sub"},[s("span",{staticClass:"user__avatar"},[s("img",{attrs:{src:n("4e0c"),alt:"",width:"150",height:"150"}})])])}],r={name:"ChatBoard",data:function(){return{}},computed:{posts:function(){return this.$store.state.posts}},created:function(){this.$store.dispatch("getPosts")}},m=r,c=(n("6877"),n("2877")),l=Object(c["a"])(m,a,i,!1,null,"a05897f6",null),u=l.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isSignin?n("div",[n("div",[n("button",{staticClass:"btn btn__add",on:{click:function(e){t.showCommentForm=!t.showCommentForm}}},[n("span")])])]):n("div",[n("button",{staticClass:"btn btn__add",on:{click:function(e){return t.linkToLogin()}}},[n("span")])]),n("div",[t.showCommentForm?n("transition",{attrs:{name:"overlay"}},[n("div",{staticClass:"drawer__overlay",on:{click:function(e){e.stopPropagation(),t.showCommentForm=!t.showCommentForm}}})]):t._e(),n("transition",{attrs:{name:"drawer"}},[t.showCommentForm?n("div",{staticClass:"drawer__base"},[n("div",{staticClass:"drawer__baseInner"},[n("p",[t._v("新しいコメント")]),1==t.errorMessage.emptyName?n("div",[n("p",[t._v("ニックネームを入力してください")])]):t._e(),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newPost.name,expression:"newPost.name"}],staticClass:"form form__input",attrs:{type:"text",placeholder:"ニックネーム"},domProps:{value:t.newPost.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.addComment():null},input:function(e){e.target.composing||t.$set(t.newPost,"name",e.target.value)}}})]),1==t.errorMessage.emptyComment?n("div",[n("p",[t._v("コメントを入力してください")])]):t._e(),n("p",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPost.comment,expression:"newPost.comment"}],staticClass:"form form__inputComment",attrs:{type:"text",rows:"10",cols:"5",placeholder:"コメント"},domProps:{value:t.newPost.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.addComment():null},input:function(e){e.target.composing||t.$set(t.newPost,"comment",e.target.value)}}}),n("span",{staticClass:"btn__keyTips"},[t._v("send: Shift + Enter")])]),n("div",[n("button",{staticClass:"btn btn__send",on:{click:function(e){return t.addComment()}}},[t._v(" 投稿 ")])])])]):t._e()])],1)])},p=[],_=(n("b0c0"),n("b64b"),n("bc3a")),h=n.n(_),f={name:"Form",data:function(){return{showCommentForm:!1,errorMessage:{emptyName:!1,emptyComment:!1},newPost:{name:"",comment:""}}},computed:{isSignin:function(){return null!==this.idToken},idToken:function(){return this.$store.getters.idToken}},methods:{linkToLogin:function(){this.$router.push("login")},addComment:function(){var t=this;0===Object.keys(this.newPost.comment).length||0===Object.keys(this.newPost.name).length?(0===Object.keys(this.newPost.name).length&&(this.errorMessage.emptyName=!0),0===Object.keys(this.newPost.comment).length&&(this.errorMessage.emptyComment=!0)):(h.a.post("https://firestore.googleapis.com/v1/projects/vue-chat-82fcf/databases/(default)/documents/comments",{fields:{name:{stringValue:this.newPost.name},comment:{stringValue:this.newPost.comment}}},{headers:{Authorization:"Bearer ".concat(this.idToken)}}).then((function(e){console.log(e),t.$store.dispatch("getPosts")})),this.newPost.comment="",this.newPost.name="",this.showCommentForm=!1,this.errorMessage.emptyName=!1,this.errorMessage.emptyComment=!1)}}},v=f,C=(n("81e0"),Object(c["a"])(v,d,p,!1,null,"0c6fb31a",null)),w=C.exports,g={name:"Home",components:{ChatBoard:u,Form:w}},b=g,y=Object(c["a"])(b,s,o,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-33331d6a.e0df94a6.js.map